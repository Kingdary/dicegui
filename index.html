<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Digital Image Correlation Engine (DICe)</title>
    <!-- jQuery library -->
    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
    <script>if (window.module) module = window.module;</script>
    <!-- Tiff -->
    <script src="./js/tiff.js" defer></script>
    <!-- Custom JS -->
    <script src="./js/global.js" defer></script>
    <script src="./js/dice.js" defer></script>  
    <script src="./js/utils.js" defer></script>
    <script src="./js/draw.js" defer></script>
    <!-- SVG -->
    <script src="./js/svg.js" defer></script>
    <!-- Panzoom -->
    <script src="./js/jquery.panzoom.min.js" defer></script>
    <script src="./js/viewer.js" defer></script>
    <!-- Local style sheet -->
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Google fonts and icons -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  </head>
  <body>
    <div class="wrapper">
      <div class="header">
        <img src="./images/DICe_logo_white-01.png" alt="DICe logo" height="42" width="auto">
        <div id="stackButton" title="toggle stack and column view" class="banner-button stack-button">
          <div style="float:left; width:auto;"><i id="stackIcon" class="material-icons md-light md-28">view_agenda</i></div>
        </div>
        <div id="stereoButton" title="toggle stereo on/off" class="banner-button stereo-button">
          <div style="float:left; width:auto;"><i class="material-icons md-light md-28">camera_alt</i></div>
          <div id="x1x2" style="float:left; width:auto; padding-left:5px;">x 1</div>
        </div>
        <div id="paramsButton" title="toggle opions pane shown/hidden" class="banner-button params-button">
          <i class="material-icons md-light md-36">menu</i>
        </div>
      </div>
      <div id="contentDiv" class="content">
       <div class="fixed-col">
         <h1>IMAGES</h1>
          <p class="nav-item">file select method:</p>
           <select id="fileSelectMode" style="width:95%; margin-bottom:10px; margin-left:10px;">
               <option value="list">select individually</option>
               <option value="sequence">sequence of images</option>
               <option value="cine">.cine video frames</option>
           </select>

          <div id="leftImageMenu">
            <!-- begin list input -->
            <div class="nav-list">
              <div class="nav-two-cam nav-item">LEFT</div>
              <label for="leftRefInput" class="custom-file-input action-li">
                <i class="material-icons md-dark md-br-pad">add_a_photo</i>
                load reference     
              </label>
              <input id="leftRefInput" type="file" accept="image/*">
             <div id="refImageText" style="word-wrap: break-word; margin-left:10px;"><span id="refImageTextSpan"></span></div>
              <label for="leftDefInput" class="custom-file-input action-li">
                <i class="material-icons md-dark md-br-pad">add_a_photo</i>
                load deformed    
              </label>
              <input id="leftDefInput" type="file" multiple accept="image/*">
              <div id="defImageListLeftContainer" class="def-image-list-container">
                <ul id="defImageListLeft" class="def-image-ul">
                </ul>
              </div>
            </div>
            <!-- end list input -->
            <!-- begin sequence input -->
            <div class="nav-sequence">
             <div id="changeImageFolder" class="action-li"><i class="material-icons md-dark md-br-pad">folder</i>
                image folder
             </div>
             <div id="imageFolder" style="word-wrap: break-word;"><span id="imageFolderSpan"></span></div>
             <div>prefix</div>
             <input type="text" id="imagePrefix" name="imagePrefix" value="" style="width:100%;">
             <div>ref index</div>
             <input type="text" id="refIndex" name="refIndex" value="0" style="width:100%;">
             <div>start index</div>
             <input type="text" id="startIndex" name="startIndex" value="0" style="width:100%;">
             <div>end index</div>
             <input type="text" id="endIndex" name="endIndex" value="0" style="width:100%;">
             <div>frame interval</div>
             <input type="text" id="skipIndex" name="skipIndex" value="1" style="width:100%;">
             <div>digits in number</div>
             <input type="text" id="numDigits" name="numDigits" value="1" style="width:100%;">
             <div class="nav-two-cam">stereo left suffix</div>
             <input class="nav-two-cam" type="text" id="stereoLeftSuffix" name="stereoLeftSuffix" value="_0" style="width:100%;">
             <div class="nav-two-cam">stereo right suffix</div>
             <input class="nav-two-cam" type="text" id="stereoRightSuffix" name="stereoRightSuffix" value="_1" style="width:100%;">
             <div>extension</div>
             <input type="text" id="imageExtension" name="imageExtension" value="" style="width:100%; margin-bottom:10px;">
             <div style="margin-bottom:4px;">reference image</div>
             <div id="imageSequencePreview" style="word-wrap: break-word; margin-bottom:10px;"><span id="imageSequencePreviewSpan"></span></div>
             <label id="loadRef" class="action-li">
                <i class="material-icons md-dark md-br-pad">add_a_photo</i>
                load reference     
             </label>
            </div>
            <!-- end sequence input -->
            <!-- begin cine input -->
            <div class="nav-cine">
              <label for="leftCineInput" class="custom-file-input action-li">
                <i class="material-icons md-dark md-br-pad">add_a_photo</i>
                load cine   
              </label>
             <div id="cineLeftPreview" style="word-wrap: break-word; margin-bottom:10px;" class="nav-item"><span id="cineLeftPreviewSpan"></span></div>
             <input id="leftCineInput" type="file" accept=".cine">
            <div class="nav-two-cam">
              <label for="rightCineInput" class="custom-file-input action-li">
                <i class="material-icons md-dark md-br-pad">add_a_photo</i>
                load stereo cine   
              </label>
              <input id="rightCineInput" type="file" accept=".cine">
              <div id="cineRightPreview" style="word-wrap: break-word; margin-bottom:20px;" class="nav-item"><span id="cineRightPreviewSpan"></span></div>
            </div> <!-- end nav two cam -->
              <div id="cineStartPreview" style="word-wrap: break-word; margin-bottom:10px;" class="nav-item">first frame: <span id="cineStartPreviewSpan"></span></div>
              <div id="cineEndPreview" style="word-wrap: break-word; margin-bottom:10px;" class="nav-item">last frame: <span id="cineEndPreviewSpan"></span></div>
              <div class="nav-item">ref index</div>
              <input class="nav-item" type="text" id="cineRefIndex" name="cineRefIndex" value="0" style="width:95%;">
              <div class="nav-item">start index</div>
              <input class="nav-item" type="text" id="cineStartIndex" name="cineStartIndex" value="0" style="width:95%;">
              <div class="nav-item">end index</div>
              <input class="nav-item" type="text" id="cineEndIndex" name="cineEndIndex" value="0" style="width:95%;">
              <div class="nav-item">frame interval</div>
              <input class="nav-item" type="text" id="cineSkipIndex" name="cineSkipIndex" value="1" style="width:95%;">
            </div>
            <!-- end cine input -->
          </div>
          <!-- start nav-two-cam -->
          <div id="rightImageMenu" class="nav-two-cam">
            <!-- start list -->
            <div class="nav-list">
              <div class="nav-two-cam nav-item">RIGHT</div>
              <label for="rightRefInput" class="custom-file-input action-li">
                <i class="material-icons md-dark md-br-pad">add_a_photo</i>
                load reference     
              </label>
              <input id="rightRefInput" type="file" accept="image/*">                  
              <div id="refImageTextRight" style="word-wrap: break-word; margin-left:10px;"><span id="refImageTextRightSpan"></span></div>
              <label for="rightDefInput" class="custom-file-input action-li">
                <i class="material-icons md-dark md-br-pad">add_a_photo</i>
                load deformed    
              </label>
              <input id="rightDefInput" type="file" multiple accept="image/*">                  
              <div id="defImageListRightContainer" class="def-image-list-container">
                <ul id="defImageListRight" class="def-image-ul">
                </ul>
              </div>
            </div>
            <!-- end list -->
              <h1 style="margin-top:30px;">CALIBRATION</h1>
              <label for="calInput" class="custom-file-input action-li">
                <i class="material-icons md-dark md-br-pad">image_aspect_ratio</i>
                load cal file   
              </label>
              <input id="calInput" type="file" accept=".txt,.xml">                  
              <div id="calContainer" class="cal-list-container">
                <ul id="calList" class="cal-ul">
                </ul>
              </div>
          </div>
          <!-- end nav-two-cam-->
          <h1 style="margin-top:40px;">ANALYSIS</h1>
          <div id="runLoader" class="pre-loader"></div>
          <ul>
            <li id="changeWorkingDirLi" class="action-li"><i class="material-icons md-dark md-br-pad">folder</i>
              set working dir
            </li>
            <li id="runLi" class="action-li"><i class="material-icons md-dark md-br-pad">play_circle_filled</i>
              <span>run 2d</span>
            </li>
            <li id="writeLi" class="action-li"><i class="material-icons md-dark md-br-pad">archive</i>
              <span>write input files</span>
            </li>
          </ul>
          <svg class="spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
            <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>
          </svg>
          <div class="test-animation"> </div>
        </div> <!-- end fixed-col -->
        <div class="fluid-col">
          <div id="innerFluidLeftCol" class="inner-fluid-left-col">
            <div id="viewerFillDiv" class="fill-div">
              <div id="subFillDivLeft" class="sub-fill-div">
                <div class="toggle-div">
                  <div class="toggle-div-banner">
                    <span class="toggle-title">VIEW CONTROL</span>
                    <span class="toggle-icon action-li"><i class="material-icons md-dark toggler">swap_vertical_circle</i></span>
                  </div> <!-- end toggle div banner -->
                  <div class="toggle-div-body">
                    <i class="material-icons md-dark action-li zoom-in-left" title="zoom in">zoom_in</i>
                    <i class="material-icons md-dark action-li zoom-out-left" title="zoom out">zoom_out</i>
                    <input type="range" class="zoom-range-left">                   
                    <i class="material-icons md-dark action-li reset-left" title="actual size">aspect_ratio</i>
                    <i class="material-icons md-dark action-li" id="zoomToFitLeft" title="zoom to fit">zoom_out_map</i>
                    <label id="leftDims"></label>
                    <label id="leftPos"></label>
                  </div> <!-- end toggle div body -->
                </div> <!-- end toggle div -->
                <div class="toggle-div">
                  <div class="toggle-div-banner">
                    <span class="toggle-title">REGIONS OF INTEREST</span>
                    <span class="toggle-icon action-li"><i class="material-icons md-dark toggler">swap_vertical_circle</i></span>
                  </div> <!-- end toggle div banner -->
                  <div class="toggle-div-body">
                    <i id="addROIs" class="material-icons md-dark action-li" title="add ROIs">add_circle</i>
                    <i id="addExcludeds" class="material-icons md-dark action-li" title="add exclusions">add_circle_outline</i>
                    <i id="removeLastROI" class="material-icons md-dark action-li" title="remove last ROI">remove_circle</i>
                    <i id="removeLastExcluded"class="material-icons md-dark action-li" title="remove last exclusion">remove_circle_outline</i>
                    <i id="resetROIs"class="material-icons md-dark action-li" title="reset ROIs">block</i>
                    <label id="ROIProgress"></label>
                  </div> <!-- end toggle div body -->
                </div> <!-- end toggle div -->
                <div id="viewWindowLeft" class="fill-div" style="background-color:darkgray;">
                  <div id="panzoomLeft" class="panzoom">
                    <!--<svg id="svgLeft" width="300" height="300"> -->
                    <!--  <circle cx="50" cy="50" r="40" stroke="green" stroke-width="4" fill="yellow" />-->
                    <!--</svg>-->
                    <div id="svgContainer" class="svg-container"></div>
                  </div>
                 </div>
              </div> <!-- end fill div left -->

              <div id="subFillDivRight" class="sub-fill-div">
                <div class="toggle-div">
                <div class="toggle-div-banner">
                    <span class="toggle-title">VIEW CONTROL</span>
                    <span class="toggle-icon action-li"><i class="material-icons md-dark toggler">swap_vertical_circle</i></span>
                </div> <!-- end toggle div banner -->
                <div class="toggle-div-body">
                    <i class="material-icons md-dark action-li zoom-in-right" title="zoom in">zoom_in</i>
                    <i class="material-icons md-dark action-li zoom-out-right" title="zoom out">zoom_out</i>
                    <input type="range" class="zoom-range-right">                   
                    <i class="material-icons md-dark action-li reset-right" title="actual size">aspect_ratio</i>
                    <i class="material-icons md-dark action-li" id="zoomToFitRight" title="zoom to fit">zoom_out_map</i>
                    <label id="rightDims"></label>
                    <label id="rightPos"></label>
                   </div> <!-- end toggle div body -->
                </div> <!-- end toggle div -->
                <div class="toggle-div">
                  <div class="toggle-div-banner">
                    <span class="toggle-title">CROSS CORRELATION UTILS</span>
                    <span class="toggle-icon action-li"><i class="material-icons md-dark toggler">swap_vertical_circle</i></span>
                  </div> <!-- end toggle div banner -->
                  <div class="toggle-div-body" style="min-height:30px;">
                    <i id="previewCross" class="material-icons md-dark action-li" title="preview cross initialization">collections</i>
                    <i id="initCross" class="material-icons md-dark action-li" title="seed nonlinear warp">photo_size_select_large</i>
                    <i id="clearCross" class="material-icons md-dark action-li" title="clear nonlinear warp">block</i>
                  </div> <!-- end toggle div body -->
                </div> <!-- end toggle div -->

                 <div id="viewWindowRight" class="fill-div"  style="background-color:darkgray;">
                   <div id="panzoomRight" class="panzoom"></div>
                 </div>
               </div> <!-- end fill div right -->
              
            </div> <!-- end fill div -->
                 
                 <div class="toggle-div">
                   <div class="toggle-div-banner">
                       <span class="toggle-title">CONSOLE</span>
                       <span class="toggle-icon action-li">
                         <i id="clearConsoleIcon" class="material-icons md-dark action-li" title="clear console">block</i>
                         <i id="consoleToggle" class="material-icons md-dark toggler">swap_vertical_circle</i>
                       </span>
                   </div> <!-- end toggle div banner -->
                   <div class="toggle-div-body">
                       <div id="consoleWindow" class="console">
                            Console output: <br/><br/>
                       </div>
                   </div> <!-- end toggle div body -->
                 </div> <!-- end toggle div -->
                 
            </div> <!-- end inner-fluid-left-col -->
            <div id="innerFluidRightCol" class="inner-fluid-right-col">
              <div class="toggle-div">
                   <div class="toggle-div-banner">
                       <span class="toggle-title">OPTIONS</span>
                       <span class="toggle-icon action-li"><i class="material-icons md-dark toggler">swap_vertical_circle</i></span>
                   </div> <!-- end toggle div banner -->
                   <div class="toggle-div-body">
                       <p>DIC method:</p>
                       <select>
                           <option value="subset">subset</option>
                       </select>
                       <div id="subsetParams" class="param-options">
                           <p>subset size: <label id="subsetSizeLabel">31</label> (pixels)</p>
                           <input id="subsetSize" type="range" min="9" max="51" defaultValue="31" value="31" step="2">
                           <p>step size: <label id="stepSizeLabel">15</label> (pixels)</p>
                           <input id="stepSize" type="range" min="1" max="100" defaultValue="15" value="15" step="1">
                           <p>shape functions:</p>
                           <p><input id="translationCheck" type="checkbox" checked> translation</p>
                           <p><input id="rotationCheck" type="checkbox" > rotation</p>
                           <p><input id="normalStrainCheck" type="checkbox" > normal stretch</p>
                           <p><input id="shearStrainCheck" type="checkbox" > shear stretch</p>
                           <p>filtering:</p>
                           <p><input id="filterCheck" type="checkbox"> gauss filter images</p>
                           <p>filter window: <label id="filterSizeLabel">5</label> (pixels)</p>
                           <input id="filterSize" type="range" min="5" max="13" defaultValue="5" value="5" step="2">
                           <p>strain:</p>
                           <p><input id="strainCheck" type="checkbox" checked> compute strain</p>
                           <p>gauge size: <label id="strainGaugeSizeLabel">45</label> (pixels)</p>
                           <input id="strainGaugeSize" type="range" min="15" max="150" defaultValue="45" value="45" step="15"> 
                           <p><input id="omitTextCheck" type="checkbox" > omit text output</p>
                       </div>
                       <div id="globalParams" class="param-options">
                            
                       </div>
                   </div> <!-- end toggle div body -->
              </div> <!-- end toggle div -->
              <div class="toggle-div">
                   <div class="toggle-div-banner">
                       <span class="toggle-title">REFERENCE</span>
                       <span class="toggle-icon action-li"><i class="material-icons md-dark toggler">swap_vertical_circle</i></span>
                   </div> <!-- end toggle div banner -->
                   <div class="toggle-div-body">
                     <div class="reference-text">
                     <p>Select at least one reference and deformed image. Then the "run" and "write input" buttons should appear. (For stereo analysis, a reference image and deformed image must be selected for the right camera as well as a calibration file for the buttons to appear.) </p>
                     <p>Press "run 2d" or "run stereo" if you want to run the DICe executable in serial on this machine. Choose "write input" if you want to write the input files to be run via the command line later (do this to run on an HPC system in parallel). </p>
                     <p>Visualize the ExodusII (*.e) output file in the results folder using ParaView. A comma separated text file with results values is also created in the results folder.</p>
                     </div>
                     <p>Having trouble? Take a deep breath (after all, you got this code for free) and submit an issue at: <a href="http://github.com/dicengine/dice/issues" alt="">issues</a></p>
                     <p><a href="http://dicengine.github.io/dice/" alt="">class and namespace documentation</a></p>
                     <p><a href="http://github.com/dicengine/dice" alt="">source code</a></p>
                   </div> <!-- end toggle div body -->
              </div> <!-- end toggle div -->
              <div class="toggle-div">
                   <div class="toggle-div-banner">
                       <span class="toggle-title">WORKING DIRECTORY</span>
                       <span class="toggle-icon action-li"><i class="material-icons md-dark toggler">swap_vertical_circle</i></span>
                   </div> <!-- end toggle div banner -->
                   <div class="toggle-div-body">
                       <div style="width:100%; line-height: 24px;">
                           current working directory: </br>
                           <label id="workingDirLabel" style="word-wrap: break-word;">${home}</label> 
                       </div>
                       <div style="background-color: #f2f2f2; padding 2px; line-height: 18px; width: 100%;">
                           <div style="background-color:#cccccc; padding: 5px;">results files:</div>
                           <div id="resultsFilesList" style="padding: 2px; line-height: 22px;"> </div>
                       </div>
                   </div> <!-- end toggle div body -->
              </div> <!-- end toggle div -->
            </div> <!-- end inner-fluid-right-col -->
        </div> <!-- end fluid-col -->
      </div> <!-- end content -->
      <div class="footer">
        Copyright 2016 Sandia Corporation
      </div>
    </div> <!-- end wrapper -->
  </body>
</html>
